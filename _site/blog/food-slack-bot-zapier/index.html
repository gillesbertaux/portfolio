<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Gilles Bertaux : Co-founder/CEO Livestorm | Food Recommendation Slack Bot with Zapier</title>

	<!-- General Metas -->
	<meta name="google-site-verification" content="dP8o9sKNCibdnxzpaDA0blhIHptcacqhvKiVzYIdGME" />
	
	<meta name="language" content="fr">
	
	<meta name="author" content="Gilles Bertaux, hello@gillesbertaux.com">
	
	<meta name="description" content="I've been using Zapier intensively for a while now and I built some pretty advanced cool integrations with all sort of tools. This how we built a recommendation slack bot with zapier.">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<!-- Apple Metas -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-title" content="Gilles Bertaux">
	<meta name="apple-touch-fullscreen" content="yes">

	<!-- Facebook Metas -->
	<meta property='og:locale' content='fr_FR'/>
	<meta property='og:title' content='Gilles Bertaux : Co-founder/CEO Livestorm | Food Recommendation Slack Bot with Zapier'/>
	
	<meta property='og:description' content="I've been using Zapier intensively for a while now and I built some pretty advanced cool integrations with all sort of tools. This how we built a recommendation slack bot with zapier."/>
	
	<meta property='og:url' content='http://gillesbertaux.com'/>
	<meta property='og:site_name' content='Gilles Bertaux : Co-founder/CEO Livestorm'/>
	<meta property='og:type' content='website'/>
	
	<meta property='og:image' content="http://www.gillesbertaux.com/img/gradient.jpg" />
	

	<!-- Twitter Metas -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@gillesbertaux">
	<meta name="twitter:title" content="Gilles Bertaux : Co-founder/CEO Livestorm | Food Recommendation Slack Bot with Zapier">
	
	<meta name="twitter:description" content="I've been using Zapier intensively for a while now and I built some pretty advanced cool integrations with all sort of tools. This how we built a recommendation slack bot with zapier.">
	
	<meta name="twitter:creator" content="@gillesbertaux">
	
	<meta name="twitter:image:src" content="http://www.gillesbertaux.com/img/gradient.jpg">
	
	<meta name="twitter:domain" content="http://gillesbertaux.com">

	<!-- Google / Schema -->
	<meta itemprop="name" content="Food Recommendation Slack Bot with Zapier">
	
	<meta itemprop="description" content="I've been using Zapier intensively for a while now and I built some pretty advanced cool integrations with all sort of tools. This how we built a recommendation slack bot with zapier.">
	

	<!-- IE -->
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta http-equiv="cleartype" content="on">
	<meta name="skype_toolbar" content="skype_toolbar_parser_compatible">

	<!-- Links -->
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="canonical" href="/blog/food-slack-bot-zapier/">
	<link rel="author" href="https://plus.google.com/u/0/+GillesBertaux/" />
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon" />
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Lato:400,700,900' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>
<script src="//load.sumome.com/" data-sumo-site-id="d611300aeb608d5a1587e1529366da5fdf2f93c3f11019db0fc3ba13c2591060" async="async"></script>
<body>

  <div class="wrapper wrapper--post" itemscope itemtype="http://schema.org/Article">

    <nav class="main-nav">
  <div>
    <a class="link-nav linknav--about"href="/">Home</a>
    <a class="link-nav linknav--work"href="/#projects">Projects</a>
    <a class="link-nav linknav--talks"href="/#talks">Talks</a>
    <a class="link-nav linknav--blog"href="/#blog">Essays</a>
    <a class="link-nav linknav--qas"href="/#qas">Q&As</a>
  </div>
  <div>
    <span class="desc-nav">Need to run smarter webinars?</span>
    <a class="main-nav-btn" href="//livestorm.co">See Livestorm</a>
  </div>
</nav>

  	<header class="post-header">
      <p class="post-nav"><a title="back to posts" href="../../#blog">Back to all posts</a></p>
	    <h1 class="post-title" itemprop="name">Food Recommendation Slack Bot with Zapier</h1>
      <p class="post-meta" itemprop="dateCreated" datetime="2016-03-18 00:00:00 +0000">Published on Mar 18, 2016</span></p>
  	</header>

    <article class="post-content" itemprop="text">
    <p>I’ve been using Zapier intensively for a while now and I built some pretty advanced cool integrations with all sort of tools. Most of them were business related but I wanted to show you how we hacked some fun stuff for our own offices at <a href="https://livestorm.co">Livestorm</a>.</p>

<p>Here’s the basic story I was aiming for:</p>

<p><em>Every day at noon, I pick a random item in a pre-built restaurant DB. Then the Slack bot sends a new message in our #notifications channel containing the restaurant info.</em></p>

<p>Here are the main steps to build the Slack Bot:</p>

<ol>
  <li>Scrap a viable source of restaurants</li>
  <li>Clean the data</li>
  <li>Start the Zapier integration</li>
  <li>Insert a small JS script to randomize</li>
  <li>Send the message in Slack</li>
</ol>

<h2 id="find-a-reliable-source-of-data">Find a reliable source of data</h2>

<p>First things first, let’s find some data source worth scrapping. I figured that Yelp was our best choice but you might have some local platform in your area that’s more accurate.</p>

<p>I want restaurants with the following criterias:</p>

<ul>
  <li>Delivery service (Not every restaurant in France offers that service…)</li>
  <li>Good restaurants</li>
  <li>Reasonably cheap</li>
  <li>Close to the office</li>
  <li>Open at noon</li>
</ul>

<p>Go to Yelp and applied those criterias. Then copy paste the URL once the criterias are applied.</p>

<p><img src="/img/yelp.png" alt="yelp-criterias" title="yelp screenshot" /></p>

<h2 id="crawl-the-source-using-importiohttpimportio--store-in-google-spreadsheet">Crawl the source using <a href="http://import.io">Import.io</a> &amp; Store in Google Spreadsheet</h2>

<p>I am not going to do a step by step tutorial on Import.io since it’s pretty straightfroward. Basically, pick the Crawler option and then go to your Yelp URL. Each data type will be a column in the final CSV generated.</p>

<p>Pick the data you need, here I selected:</p>

<ul>
  <li>Title</li>
  <li>Pricing</li>
  <li>Type</li>
  <li>Rating</li>
  <li>Address</li>
  <li>Phone number</li>
</ul>

<p><img src="/img/importio.png" alt="import.io" title="import.io screenshot" /></p>

<p>That’s it! Then just run the crawler. Now import the whole thing to Google Spreadsheet:</p>

<p><img src="/img/sheet.png" alt="spreadsheet data" title="spreadsheet data" /></p>

<p>Here I over used the <code class="highlighter-rouge">=REGEXEXTRACT()</code> formula to clean it. Make sure you have the HTML of each item in a column in the list so that you can extract every element you want.</p>

<h3 id="the-zapier-integration">The Zapier integration</h3>

<p>Almost there. First, since we want the script to run every day at noon, we’ll start with the Sheduling built-in app from Zapier:</p>

<p><img src="/img/schedule.png" alt="schedule zapier" title="schedule zapier" /></p>

<p>Let’s insert a small Javascript snippet to trigger a random number. Here we trigger something between 1 and 331 because I have 331 entries in my database:</p>

<p><img src="/img/zapier-js.png" alt="javascript zapier" title="javascript zapier" /></p>

<p>Then we link our spreadshseet. We want to look up for that random value, we will be reusing the matching row’s data later:</p>

<p><img src="/img/zapier-lookup-sheet.png" alt="lookup sheet zapier" title="lookup sheet zapier" /></p>

<p>Final touch, we create our Slack message:</p>

<p><img src="/img/slack-zapier.png" alt="slack zapier" title="slack zapier" /></p>

<p>And voilà. Here’s how it looks every day at noon:</p>

<p><img src="/img/slack-msg.png" alt="slack message" title="slack message" /></p>

<p>To be 100% honest we stopped using it at <a href="https://livestorm.co">Livestorm</a> because the data we scraped was not as reliable as we thought. So try to get some real good up to date data.</p>

<p>Next step will be: cleaner data and a basic hosted randomization engine server-side.</p>

<p>Hope that helps.</p>


  	</article>

    <div id="disqus_thread" class="post-comments"></div>

  </div>

  <script src='/js/jquery-1.11.0.min.js'></script>
<script src='/js/main.min.js'></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27077783-5', 'auto');
  ga('send', 'pageview');
</script>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'gillesbertaux';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</body>
</html>
